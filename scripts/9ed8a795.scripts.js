"use strict";var App=angular.module("mddFinalApp",["ngRoute","firebase"]);App.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.tpl",controller:"MainCtrl"}).when("/list",{templateUrl:"views/list.tpl",controller:"ApiCtrl"}).when("/detail/:id",{templateUrl:"views/detail.tpl",controller:"DetailCtrl"}).otherwise({redirectTo:"/"})}]),App.run(["$firebaseSimpleLogin","$rootScope","$window","$location",function(a,b,c,d){var e=new Firebase("https://wddcolumn.firebaseio.com/");b.loginObject=a(e),b.$on("$firebaseSimpleLogin:login",function(a,d){d?(console.log("Username: "+b.loginObject.user.username),c.location.href="#/list"):console.log("No user")}),b.$on("$firebaseSimpleLogin:logout",function(){d.path("/")})}]),angular.module("mddFinalApp").controller("MainCtrl",["$scope","FireConn",function(a,b){console.log(b),a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma","Foundation"]}]),angular.module("mddFinalApp").controller("ApiCtrl",["$scope","$rootScope","$location","$http",function(a,b,c,d){b.loginObject.$getCurrentUser().then(function(b){b?d.jsonp("http://api.tumblr.com/v2/blog/wddcolumn.tumblr.com/posts/text?callback=JSON_CALLBACK&api_key=BhWySvI9jLXAwhFCYujxtqhAGw9e6BSOpxwiyKNkRduq1qMN7g&type=text&filter=text").success(function(b){a.data=b}).error(function(a){console.log(a)}):c.path("/")})}]);var App=angular.module("mddFinalApp");App.controller("DetailCtrl",["$scope","$http","$routeParams","$sce","$rootScope","$location",function(a,b,c,d,e,f){e.loginObject.$getCurrentUser().then(function(e){e?b.jsonp("http://api.tumblr.com/v2/blog/wddcolumn.tumblr.com/posts/text?callback=JSON_CALLBACK&api_key=BhWySvI9jLXAwhFCYujxtqhAGw9e6BSOpxwiyKNkRduq1qMN7g&type=text&id="+c.id).success(function(b){a.article=b,a.image="http://api.tumblr.com/v2/blog/"+b.response.blog.name+".tumblr.com/avatar/64",a.snippet=b.response.posts[0].body,a.trustSnippet=function(){return d.trustAsHtml(a.snippet)},a.date=Date.parse(a.article.response.posts[0].date)}).error(function(a){console.log(a)}):f.path("/")})}]),App.controller("CommentCtrl",["$scope","$rootScope","$firebase","$routeParams",function(a,b,c,d){a.comments=c(new Firebase("https://wddcolumn.firebaseio.com/comments/"+d.id)),a.commentDate=Date(),a.parsedDate=Date.parse(a.commentDate),a.saveData=function(){void 0===a.comments.message||""===a.comments.message||null===a.comments.message?(console.log("error"),a.errorClass="error",a.errorMessage="Message cannot be left blank!"):(console.log("Success"),a.comments.$add({username:b.loginObject.user.username,avatar:b.loginObject.user.avatar_url,date:a.parsedDate,comment:a.comments.message}),a.comments.message="",a.errorClass="",a.errorMessage="")}}]),angular.module("mddFinalApp").factory("FireConn",["$firebase",function(a){var b="https://wddcolumn.firebaseio.com",c=new Firebase(b);return a(c)}]);